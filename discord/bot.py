#!/usr/bin/python3
# bot 
# created by : bluecosmo (chris)

import discord
import subprocess

TOKEN = "TOKEN"

intents = discord.Intents.default()
intents.message_content = True
client = discord.Client(intents=intents)

@client.event
async def on_ready():
    print(f'{client.user} has connected to Discord!')

# execute system commands
@client.event
async def execute(message, cmd):
    cmd_output = subprocess.check_output(cmd, shell=True, universal_newlines=True)
    await message.channel.send(cmd_output[:2000])
    return

@client.event
async def on_message(message):
    msg = str(message.content)

    if msg.startswith('$'):
        cmd = msg[1:].strip()
        await execute(message, cmd)

client.run(TOKEN)
